(function(t){function e(e){for(var n,r,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==o[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0113":function(t,e,a){},"0226":function(t,e,a){"use strict";var n=a("c393"),o=a.n(n);o.a},"04a6":function(t,e,a){},"2bec":function(t,e,a){"use strict";var n=a("af23"),o=a.n(n);o.a},3158:function(t,e,a){"use strict";var n=a("0113"),o=a.n(n);o.a},"3a8f":function(t,e,a){},"3eb6":function(t,e,a){"use strict";var n=a("3ee6"),o=a.n(n);o.a},"3ee6":function(t,e,a){},"4ce8":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.$store.state.signed?a("Default"):a("Auth")],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth"},[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)},i=[],c={name:"Auth"},u=c,l=(a("0226"),a("2877")),d=Object(l["a"])(u,r,i,!1,null,null,null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("TheHeader"),a("div",{staticClass:"app"},[a("transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1)},f=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("div",{staticClass:"navbar"},[a("div",{staticClass:"navbar-left"},[a("router-link",{attrs:{to:"/home"}},[a("img",{attrs:{src:t.logoWhite,alt:"Mesa Inc"}})])],1),a("div",{staticClass:"navbar-right"},[a("div",{staticClass:"left"},[a("font-awesome-icon",{attrs:{icon:"star"}})],1),a("div",{staticClass:"right"},[a("div",{staticClass:"profile"},[a("div",[a("strong",[t._v(t._s(t.name))]),a("router-link",{attrs:{to:"/profile"}},[t._v("Meu perfil ")])],1),a("img",{attrs:{src:"https://api.adorable.io/avatars/285/abott@adorable.png",alt:"Perfil"}})]),a("button",{staticClass:"btn",on:{click:t.signOut}},[t._v(" Sair "),a("font-awesome-icon",{attrs:{icon:"sign-out-alt"}})],1)])])])])},g=[],h=a("5530"),w=a("f295"),b=a.n(w),_=a("ade3");function y(t){for(var e={},a=function(a){var n=[t.fields[a]];e[n]={get:function(){return this.$store.state[t.base][n]},set:function(e){this.$store.commit(t.mutation,Object(_["a"])({},n,e))}}},n=0;n<t.fields.length;n++)a(n);return e}var P={name:"TheHeader",computed:Object(h["a"])({},y({fields:["name"],base:"user"})),data:function(){return{logoWhite:b.a,user:{name:"",email:""}}},mounted:function(){this.user=this.$store.state.user},methods:{signOut:function(){this.$store.dispatch("signOut"),this.$router.push("/")}}},$=P,C=(a("de89"),Object(l["a"])($,v,g,!1,null,"1887cb3c",null)),x=C.exports,L={name:"Auth",components:{TheHeader:x}},E=L,O=(a("3eb6"),Object(l["a"])(E,p,f,!1,null,"58747347",null)),S=O.exports,k={name:"App",components:{Auth:m,Default:S},created:function(){var t=this;window.localStorage.token&&this.$store.dispatch("getUser").catch((function(){t.$router.push({name:"signin"}),window.localStorage.removeItem("token")}))}},T=k,N=(a("5c0b"),Object(l["a"])(T,o,s,!1,null,null,null)),j=N.exports,A=(a("45fc"),a("8c4f")),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"left"},[a("img",{attrs:{src:t.logoWhite,alt:"Mesa Inc"}})]),a("div",{staticClass:"right"},[a("img",{attrs:{src:t.logo,alt:"Mesa"}}),a("form",{on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[a("label",{attrs:{for:"email"}},[t._v("E-mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{name:"email",type:"email",id:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",id:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",[t._v("Entrar")])]),a("span",[t._v(" Não tem uma conta? "),a("router-link",{attrs:{to:"/signup"}},[t._v("Crie a sua conta aqui.")])],1)])])},R=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"password"}},[t._v(" Senha "),a("a",{staticClass:"label-link",attrs:{target:"_black",href:"#"}},[t._v("Esqueceu sua senha?")])])}],U=a("9b19"),I=a.n(U),D={data:function(){return{logo:I.a,logoWhite:b.a,user:{email:"",password:""}}},methods:{signIn:function(){var t=this;this.$store.dispatch("signIn",this.user).then((function(){t.$router.push({name:"home"})})).catch((function(e){var a="Ops, ocorreu um erro interno.";e.response.data.length>0&&(a=e.response.data[0].message),t.$vToastify.error(a,"Erro")}))}},created:function(){document.title="Efetue login"}},q=D,z=(a("ce13"),Object(l["a"])(q,M,R,!1,null,"57136986",null)),W=z.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"left"},[a("img",{attrs:{src:t.logoWhite,alt:"Mesa Inc"}})]),a("div",{staticClass:"right"},[a("img",{attrs:{src:t.logo,alt:"Mesa"}}),a("form",{on:{submit:function(e){return e.preventDefault(),t.signUp(e)}}},[a("label",{attrs:{for:"name"}},[t._v("Nome")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],attrs:{name:"name",type:"name",id:"name",required:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),a("label",{attrs:{for:"email"}},[t._v("E-mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{name:"email",type:"email",id:"email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("label",{attrs:{for:"password"}},[t._v("Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",id:"password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",[t._v("Cadastrar")])]),a("span",[t._v(" Já tem uma conta? "),a("router-link",{attrs:{to:"/"}},[t._v("Efetue o login aqui.")])],1)])])},J=[],B={data:function(){return{logo:I.a,logoWhite:b.a,user:{name:"",email:"",password:""}}},methods:{signUp:function(){var t=this;this.$store.dispatch("signUp",this.user).then((function(){t.$vToastify.success("Usuário cadastrado com sucesso!","Sucesso"),t.$router.push("/")})).catch((function(e){var a="Ops, ocorreu um erro interno.";e.response.data.length>0&&(a=e.response.data[0].message),t.$vToastify.error(a,"Erro")}))}},created:function(){document.title="Cadastre-se"}},F=B,Q=(a("b600"),Object(l["a"])(F,G,J,!1,null,"6624308d",null)),X=Q.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("modal",{attrs:{name:"new-location",id:"new-location",width:600,height:650}},[a("ModalNewLocation")],1),a("modal",{attrs:{name:"details-location",id:"details-location",width:600,height:650}},[a("ModalDetailsLocation",{attrs:{locationSelect:t.locationSelect}})],1),a("modal",{attrs:{name:"evaluation-location",id:"evaluation-location",width:600,height:450}},[a("ModalEvaluationLocation",{attrs:{locationSelect:t.locationSelect}})],1),a("div",{staticClass:"locations"},[a("div",{staticClass:"header"},[a("p",[t._v("Localizações")]),a("button",{on:{click:function(e){return t.show("new-location","")}}},[a("font-awesome-icon",{attrs:{icon:"plus"}})],1)]),a("ul",t._l(t.locations,(function(e){return a("li",{key:e.id},[a("div",[a("button",{staticClass:"name",on:{click:function(a){return t.show("details-location",e.id)}}},[a("strong",[t._v(t._s(e.name))])]),a("span",[t._v(t._s(e.address))])]),a("div",[a("button",{on:{click:function(a){return t.show("evaluation-location",e.id)}}},[a("strong",[a("font-awesome-icon",t._b({attrs:{icon:"star",id:e.id}},"font-awesome-icon",t.getFav(e.id),!1))],1)])])])})),0)]),a("google-map",{attrs:{locations:t.locations}})],1)},K=[],V=(a("96cf"),a("1da1")),Y=(a("d3b7"),a("bc3a")),Z=a.n(Y),tt="https://mesa-inc.herokuapp.com",et=Z.a.create({baseURL:tt});et.interceptors.request.use((function(t){var e=window.localStorage.token;return e&&(t.headers.Authorization=e),t}),(function(t){return Promise.reject(t)}));var at={get:function(t){return et.get(t)},post:function(t,e){return et.post(t,e)},put:function(t,e){return et.put(t,e)},delete:function(t){return et.delete(t)}},nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"title"},[t._v("Nova Localização")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createNewLocation(e)}}},[a("label",{attrs:{for:"street"}},[t._v("Nome")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newLocation.name,expression:"newLocation.name"}],attrs:{name:"name",type:"text",id:"name",required:""},domProps:{value:t.newLocation.name},on:{input:function(e){e.target.composing||t.$set(t.newLocation,"name",e.target.value)}}}),a("label",{attrs:{for:"street"}},[t._v("Rua")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newLocation.street,expression:"newLocation.street"}],attrs:{name:"street",type:"text",id:"street",required:""},domProps:{value:t.newLocation.street},on:{input:function(e){e.target.composing||t.$set(t.newLocation,"street",e.target.value)}}}),a("label",{attrs:{for:"number"}},[t._v("Número")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newLocation.number,expression:"newLocation.number"}],attrs:{name:"number",type:"text",id:"number",required:""},domProps:{value:t.newLocation.number},on:{input:function(e){e.target.composing||t.$set(t.newLocation,"number",e.target.value)}}}),a("label",{attrs:{for:"neighborhood"}},[t._v("Bairro")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newLocation.neighborhood,expression:"newLocation.neighborhood"}],attrs:{name:"neighborhood",type:"text",id:"neighborhood",required:""},domProps:{value:t.newLocation.neighborhood},on:{input:function(e){e.target.composing||t.$set(t.newLocation,"neighborhood",e.target.value)}}}),a("label",{attrs:{for:"state"}},[t._v("Estado")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.state=e.target.multiple?a:a[0]},t.getCities]}},[a("option",{attrs:{disabled:"",value:"disabled"}},[t._v("Escolha um estado")]),t._l(t.states,(function(e){return a("option",{key:e.id,domProps:{value:e}},[t._v(" "+t._s(e.sigla)+" ")])}))],2),a("label",{attrs:{for:"city"}},[t._v("Cidade")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.city=e.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:"disabled"}},[t._v("Escolha uma cidade")]),t._l(t.cities,(function(e){return a("option",{key:e.id,domProps:{value:e.nome}},[t._v(" "+t._s(e.nome)+" ")])}))],2),a("div",{staticClass:"btns"},[a("button",{staticClass:"btn-cancelar",on:{click:t.hide}},[t._v("Cancelar")]),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):a("span",[t._v("Cadastrar")])],1)])])])},ot=[],st=(a("b0c0"),a("ac1f"),a("5319"),a("498a"),{name:"ModalNewLocation",data:function(){return{loading:!1,state:"disabled",states:[],city:"disabled",cities:[],newLocation:{name:"",street:"",number:"",neighborhood:"",latitude:"",longitude:""},locations:[]}},mounted:function(){this.getStates()},methods:{getStates:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados");case 2:a=e.sent,n=a.data,t.states=n;case 5:case"end":return e.stop()}}),e)})))()},getCities:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados/".concat(t.state.id,"/distritos"));case 2:a=e.sent,n=a.data,t.cities=n;case 5:case"end":return e.stop()}}),e)})))()},hide:function(){this.$modal.hide("new-location")},createNewLocation:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var a,n,o,s,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("disabled"!==t.state){e.next=2;break}return e.abrupt("return",t.$vToastify.error("Necessário informar o estado.","Erro"));case 2:if("disabled"!==t.city){e.next=4;break}return e.abrupt("return",t.$vToastify.error("Necessário informar a cidade.","Erro"));case 4:t.loading=!0,a=t.newLocation.name,n=t.newLocation.street.trim().replace(/ /g,"+"),o=t.city.trim().replace(/ /g,"+"),s=t.state.sigla,r=t.newLocation.number+"+"+n+"+"+o+"+"+s,i="https://maps.googleapis.com/maps/api/geocode/json?address=".concat(r,"&key=AIzaSyBJSI1G4JlXXbceQiPksP8cgo8OMd1TQ4A"),Z.a.get(i).then((function(e){var n={name:a,address:e.data.results[0].formatted_address,latitude:e.data.results[0].geometry.location.lat,longitude:e.data.results[0].geometry.location.lng};t.$store.dispatch("newLocation",n).then((function(){t.$vToastify.success("Localização cadastrada com sucesso!","Sucesso"),t.hide(),t.locations=t.getLocations(),t.loading=!1})).catch((function(e){var a="Ops, ocorreu um erro interno.";e.response.data.length>0&&(a=e.response.data[0].message),t.$vToastify.error(a,"Erro"),t.loading=!1}))}));case 12:case"end":return e.stop()}}),e)})))()}}}),rt=st,it=(a("d41f"),Object(l["a"])(rt,nt,ot,!1,null,null,null)),ct=it.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("div",{staticClass:"loading"},[a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}})],1):a("div",{staticClass:"details"},[a("div",{staticClass:"resume"},[a("div",{staticClass:"header"},[a("div",[a("strong",[t._v(t._s(t.location.name))]),a("span",[t._v(t._s(t.location.address))])]),a("button",{staticClass:"btn"},[a("font-awesome-icon",{attrs:{icon:"star"}}),t._v("Favoritar ")],1)]),a("span",{staticClass:"title"},[t._v("Resumo das avaliações")]),a("div",{staticClass:"graph-container"},[a("div",t._l(t.scores,(function(e){return a("div",{key:e.id,staticClass:"graph"},[a("span",[t._v(t._s(e.id))]),a("div",{staticClass:"grey"},[a("div",{staticClass:"orange",style:{width:e.width}})])])})),0),a("div",{staticClass:"right"},[a("h1",[t._v(t._s(t.average))]),a("h5",[t._v(t._s(t.evaluationsLength)+" comentários")])])])]),a("span",{staticClass:"title"},[t._v("Comentários")]),0===t.evaluations.length?a("div",{staticClass:"not-value"},[a("span",[t._v("Ops, essa localização não foi avaliada por nenhum usuário :(")]),a("button",{staticClass:"btn",on:{click:function(e){return t.show("evaluation-location")}}},[t._v("Avaliar")])]):a("ul",t._l(t.evaluations,(function(e){return a("li",{key:e.id},[a("img",{attrs:{src:"https://api.adorable.io/avatars/285/abott@adorable.png",alt:"Perfil"}}),a("div",[a("strong",[t._v(t._s(e.user.name))]),a("p",[t._v(t._s(e.comment))]),a("button",[a("font-awesome-icon",{attrs:{icon:"heart"}}),t._v("Gostei ")],1)])])})),0)])])},lt=[],dt=(a("a9e3"),a("b680"),{name:"ModalDetailsLocation",props:{locationSelect:{type:Number,required:!0}},data:function(){return{loading:!0,evaluations:[],scores:[],location:[],average:0,evaluationsLength:0}},mounted:function(){this.getLocation(),this.getEvaluations()},methods:{show:function(t){this.$modal.show(t),this.$modal.hide("details-location")},getLocation:function(){var t=this,e=this.locationSelect;this.loading=!0,at.get("/locations/".concat(e)).then((function(e){t.location=e.data,t.loading=!1}))},getEvaluations:function(){var t=this,e=this.locationSelect;this.loading=!0,at.get("/locations/".concat(e,"/evaluations")).then((function(e){t.evaluations=e.data,t.evaluationsLength=e.data.length,t.average=t.returnAverage(e.data),t.getScores(),t.loading=!1}))},getScores:function(){var t=[{id:5,width:this.getWidth(5)+"px"},{id:4,width:this.getWidth(4)+"px"},{id:3,width:this.getWidth(3)+"px"},{id:2,width:this.getWidth(2)+"px"},{id:1,width:this.getWidth(1)+"px"}];this.scores=t},getWidth:function(t){var e=this.evaluations,a=e.length,n=0;if(0===a)return 0;for(var o=0;o<a;o++)e[o].rating===t&&(n+=1);return n=n/a*250,n},returnAverage:function(t){var e=0,a=t.length;if(0===a)return 0;for(var n=0;n<a;n++)e+=t[n].rating;return e/=a,e=e.toFixed(1),e.replace(".",",")}}}),mt=dt,pt=(a("2bec"),Object(l["a"])(mt,ut,lt,!1,null,null,null)),ft=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"title"},[t._v("Avaliação")]),a("div",{staticClass:"container"},[t._m(0),a("div",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.createNewLocation(e)}}},[a("div",[a("button",{staticClass:"star",on:{click:function(e){return t.setRating(1)}}},[a("font-awesome-icon",t._b({attrs:{icon:"star"}},"font-awesome-icon",[t.rating>0?{color:"#e7711b"}:{color:"#969696"}],!1))],1),a("button",{staticClass:"star",on:{click:function(e){return t.setRating(2)}}},[a("font-awesome-icon",t._b({attrs:{icon:"star"}},"font-awesome-icon",[t.rating>1?{color:"#e7711b"}:{color:"#969696"}],!1))],1),a("button",{staticClass:"star",on:{click:function(e){return t.setRating(3)}}},[a("font-awesome-icon",t._b({attrs:{icon:"star"}},"font-awesome-icon",[t.rating>2?{color:"#e7711b"}:{color:"#969696"}],!1))],1),a("button",{staticClass:"star",on:{click:function(e){return t.setRating(4)}}},[a("font-awesome-icon",t._b({attrs:{icon:"star"}},"font-awesome-icon",[t.rating>3?{color:"#e7711b"}:{color:"#969696"}],!1))],1),a("button",{staticClass:"star",on:{click:function(e){return t.setRating(5)}}},[a("font-awesome-icon",t._b({attrs:{icon:"star",id:"5"}},"font-awesome-icon",[5===t.rating?{color:"#e7711b"}:{color:"#969696"}],!1))],1)]),a("label",{attrs:{for:"comment"}},[t._v("Comentário")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{id:"comment",rows:"10",cols:"50"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),a("div",{staticClass:"btns"},[a("button",{staticClass:"btn-cancelar",on:{click:t.hide}},[t._v("Cancelar")]),a("button",{staticClass:"btn",attrs:{type:"submit"},on:{click:t.evaluate}},[t.loading?a("font-awesome-icon",{staticClass:"fa-spin",attrs:{icon:"spinner"}}):a("span",[t._v("Avaliar")])],1)])])])])},gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",[a("img",{attrs:{src:"https://api.adorable.io/avatars/285/abott@adorable.png",alt:"Perfil"}})]),a("div",[a("strong",[t._v("Brenda Matias")]),a("span",[t._v("brendamatias@gmail.com")])])])}],ht={name:"ModalEvaluationLocation",props:{locationSelect:{type:Number,required:!0}},data:function(){return{loading:!1,rating:0,comment:""}},methods:{setRating:function(t){this.rating=t},hide:function(){this.$modal.hide("evaluation-location")},evaluate:function(){var t=this,e=this.locationSelect,a={rating:this.rating,comment:this.comment};return 0===this.rating?this.$vToastify.error("Por favor, avalie a localização","Erro"):""==this.comment.trim()?this.$vToastify.error("Por favor, deixe um comentário","Erro"):(this.loading=!0,void at.post("/locations/".concat(e,"/evaluations"),a).then((function(){t.$vToastify.success("Avaliação cadastrada com sucesso!","Sucesso"),t.loading=!1,location.reload()})).catch((function(e){var a="Ops, ocorreu um erro interno.";e.response.data.length>0&&(a=e.response.data[0].message),t.$vToastify.error(a,"Erro"),t.loading=!1,t.hide()})))}}},wt=ht,bt=(a("8680"),Object(l["a"])(wt,vt,gt,!1,null,null,null)),_t=bt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GmapMap",{ref:"mapRef",attrs:{id:"map",center:{lat:t.center.lat,lng:t.center.lng},zoom:17,"map-type-id":"roadmap"}})},Pt=[],$t={name:"GoogleMap",data:function(){return{locations:[],places:[],currentPlace:null,center:{lat:0,lng:0},gettingLocation:!1,errorStr:null,res:{}}},mounted:function(){this.onMapChange(),this.geolocate()},methods:{onMapChange:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getLocations");case 2:t.locations=t.$store.state.locations,t.$refs.mapRef.$mapPromise.then((function(e){t.$gmapApiPromiseLazy().then((function(a){var n=new a.maps.LatLng(-8.0565689,-34.9091322),o=new a.maps.places.PlacesService(e);function s(t){var n=t.geometry.location,o=new a.maps.InfoWindow,s=new a.maps.Marker({map:e,position:n});a.maps.event.addListener(s,"click",(function(){o.setContent(t.name),o.open(e,this)}))}for(var r=function(e,n){if(n===a.maps.places.PlacesServiceStatus.OK)for(var o=0;o<e.length;o++){s(e[o]);var r=e[o],i=r.id,c=r.name,u=r.vicinity;t.places.push({id:i,name:c,vicinity:u}),t.emitToParent()}},i=0;i<t.locations.length;i++)o.textSearch({location:n,query:t.locations[i].address},r)}))}));case 4:case"end":return e.stop()}}),e)})))()},emitToParent:function(){this.$emit("mapToParent",this.places)},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude}}))}}},Ct=$t,xt=(a("621d"),Object(l["a"])(Ct,yt,Pt,!1,null,"3c4b5b1a",null)),Lt=xt.exports,Et={name:"home",components:{ModalNewLocation:ct,ModalDetailsLocation:ft,ModalEvaluationLocation:_t,GoogleMap:Lt},data:function(){return{locations:[],locationSelect:""}},mounted:function(){this.getLocations()},methods:{getFav:function(t){return Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:at.get("/locations/".concat(t,"/evaluations")).then((function(e){if(e.data.length>0){var a=document.getElementById("".concat(t));a.classList.add("fav")}}));case 1:case"end":return e.stop()}}),e)})))()},getLocations:function(){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getLocations");case 2:t.locations=t.$store.state.locations;case 3:case"end":return e.stop()}}),e)})))()},show:function(t,e){""!==e&&(this.locationSelect=e),this.$modal.show(t)}},created:function(){document.title="Início"}},Ot=Et,St=(a("dee0"),Object(l["a"])(Ot,H,K,!1,null,"066031a5",null)),kt=St.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.updateUser(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{name:"name",placeholder:"Seu nome completo",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{name:"email",type:"email",placeholder:"Seu e-mail",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("hr"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.oldPassword,expression:"user.oldPassword"}],attrs:{name:"oldPassword",type:"password",placeholder:"Sua senha atual"},domProps:{value:t.user.oldPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"oldPassword",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{name:"password",type:"password",placeholder:"Sua nova senha"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmPassword,expression:"user.confirmPassword"}],attrs:{name:"confirmPassword",type:"password",placeholder:"Confirme a nova senha"},domProps:{value:t.user.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmPassword",e.target.value)}}}),a("button",{attrs:{type:"submit"}},[a("font-awesome-icon",{attrs:{icon:"save"}}),t._v("Salvar perfil ")],1)])},Nt=[],jt={name:"Profile",computed:Object(h["a"])({},y({fields:["name","email"],base:"user",mutation:"UPDATE_USER"})),data:function(){return{user:{oldPassword:"",password:"",confirmPassword:""}}},methods:{updateUser:function(){var t=this,e={name:this.$store.state.user.name,email:this.$store.state.user.email,password:this.user.password,oldPassword:this.user.oldPassword,confirmPassword:this.user.confirmPassword};if(e.oldPassword){if(!e.password)return this.$vToastify.error("O campo de senha não pode estar vazio.","Erro");if(!e.confirmPassword)return this.$vToastify.error("O campo de confirmação de senha não pode estar vazio.","Erro")}at.put("/users",e).then((function(){t.$vToastify.success("Perfil atualizado com sucesso!","Sucesso")})).catch((function(e){var a="Ops, ocorreu um erro interno.";e.response.data.length>0&&(a=e.response.data[0].message),t.$vToastify.error(a,"Erro")})),this.user.password="",this.user.oldPassword="",this.user.confirmPassword=""}},created:function(){document.title="Perfil"}},At=jt,Mt=(a("3158"),Object(l["a"])(At,Tt,Nt,!1,null,"0f08cfad",null)),Rt=Mt.exports;n["a"].use(A["a"]);var Ut=[{path:"/",name:"signin",component:W,meta:{signed:!1}},{path:"/signup",name:"signup",component:X},{path:"/home",name:"home",component:kt,meta:{signed:!0}},{path:"/profile",name:"profile",component:Rt,meta:{signed:!0}}],It=new A["a"]({mode:"history",base:"/",routes:Ut});It.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.login}))?window.localStorage.token?a():a("/"):a()}));var Dt=It,qt=a("2f62");n["a"].use(qt["a"]);var zt=new qt["a"].Store({state:{signed:!1,user:{id:"",name:"",email:""},locations:[]},mutations:{UPDATE_LOGIN:function(t,e){t.signed=e},UPDATE_USER:function(t,e){t.user=Object.assign(t.user,e)},UPDATE_LOCATIONS:function(t,e){t.locations=Object.assign(t.locations,e)}},actions:{getUser:function(t){return at.get("/users").then((function(e){t.commit("UPDATE_USER",e.data),t.commit("UPDATE_LOGIN",!0)}))},signUp:function(t,e){return at.post("/users",e)},signIn:function(t,e){return at.post("/sessions",e).then((function(e){"error"===e.data.status?console.log(e.data):(t.commit("UPDATE_USER",e.data.user),t.commit("UPDATE_LOGIN",!0),window.localStorage.token="Bearer ".concat(e.data.token.token))}))},signOut:function(t){t.commit("UPDATE_USER",{id:"",name:"",email:""}),window.localStorage.removeItem("token"),t.commit("UPDATE_LOGIN",!1)},getLocations:function(t){return at.get("/locations").then((function(e){t.commit("UPDATE_LOCATIONS",e.data)}))},newLocation:function(t,e){return at.post("/locations",e)}}}),Wt=a("755e"),Gt=a("1881"),Jt=a.n(Gt),Bt=a("6838"),Ft=a.n(Bt),Qt=a("ecee"),Xt=a("c074"),Ht=a("ad3d");n["a"].use(Wt,{load:{key:"AIzaSyBJSI1G4JlXXbceQiPksP8cgo8OMd1TQ4A",libraries:"places",installComponents:!0}}),n["a"].use(Ft.a,{position:"top-right"}),n["a"].use(Jt.a),Qt["c"].add(Xt["d"],Xt["c"],Xt["f"],Xt["b"],Xt["a"],Xt["a"],Xt["e"]),n["a"].component("font-awesome-icon",Ht["a"]),n["a"].config.productionTip=!1,new n["a"]({router:Dt,store:zt,render:function(t){return t(j)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),o=a.n(n);o.a},"621d":function(t,e,a){"use strict";var n=a("9747"),o=a.n(n);o.a},8680:function(t,e,a){"use strict";var n=a("9f0f"),o=a.n(n);o.a},9747:function(t,e,a){},"9b19":function(t,e,a){t.exports=a.p+"img/logo.1576ed47.svg"},"9c0c":function(t,e,a){},"9f0f":function(t,e,a){},af23:function(t,e,a){},b600:function(t,e,a){"use strict";var n=a("04a6"),o=a.n(n);o.a},c393:function(t,e,a){},ce13:function(t,e,a){"use strict";var n=a("3a8f"),o=a.n(n);o.a},d41f:function(t,e,a){"use strict";var n=a("dbae"),o=a.n(n);o.a},dbae:function(t,e,a){},de89:function(t,e,a){"use strict";var n=a("4ce8"),o=a.n(n);o.a},dee0:function(t,e,a){"use strict";var n=a("f538"),o=a.n(n);o.a},f295:function(t,e,a){t.exports=a.p+"img/logo-white.aa37e28c.svg"},f538:function(t,e,a){}});
//# sourceMappingURL=app.03fa31f9.js.map